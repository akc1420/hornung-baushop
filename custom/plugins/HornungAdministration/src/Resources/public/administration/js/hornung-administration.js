!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/bundles/administration/",t(t.s="PpIg")}({G0NF:function(e,n){e.exports='<span\n    v-tooltip="{\n        message: fullDatetime,\n        disabled: !isToday\n    }"\n>{{ formattedRelativeTime }}</span>\n'},JcXQ:function(e,n){e.exports='{% block sw_order_document_settings_modal_form_first_row %}\n    <sw-container columns="1fr 1fr" gap="0px 10px">\n        {% block sw_order_document_settings_modal_form_document_number_before %}\n            <sw-text-field :label="$tc(\'sw-order.documentModal.labelDeliveryNoteNumber\')"\n                    v-model="documentConfig.documentNumber">\n            </sw-text-field>\n        {% endblock %}\n        {% block sw_order_document_settings_modal_form_invoice_number_before %}\n            <sw-text-field :label="$tc(\'sw-order.documentModal.labelInvoiceNumber\')"\n                    v-model="documentConfig.documentInvoiceNumber">\n            </sw-text-field>\n        {% endblock %}\n    </sw-container>\n    <sw-container columns="1fr 1fr" gap="0px 10px">\n        {% block sw_order_document_settings_modal_form_document_number %}{% endblock %}\n\n        {% block sw_order_document_settings_modal_form_document_date %}\n        <sw-datepicker dateType="date"\n                       :label="$tc(\'sw-order.documentModal.labelDocumentDate\')"\n                       v-model="documentConfig.documentDate">\n        </sw-datepicker>\n        {% endblock %}\n\n        {% block sw_order_document_settings_modal_form_document_delivery_date %}\n            <sw-datepicker dateType="date"\n                           required\n                           :label="$tc(\'sw-order.documentModal.labelDeliveryDate\')"\n                           v-model="documentConfig.custom.deliveryDate">\n            </sw-datepicker>\n        {% endblock %}\n    </sw-container>\n{% endblock %}'},PpIg:function(e,n,t){"use strict";t.r(n);var o=t("JcXQ"),r=t.n(o);function u(e,n,t,o,r,u,c){try{var i=e[u](c),d=i.value}catch(e){return void t(e)}i.done?n(d):Promise.resolve(d).then(o,r)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var c=e.apply(n,t);function i(e){u(c,o,r,i,d,"next",e)}function d(e){u(c,o,r,i,d,"throw",e)}i(void 0)}))}}Shopware.Component.extend("sw-order-document-settings-delivery-bill-modal","sw-order-document-settings-modal",{template:r.a,data:function(){return{documentConfig:{custom:{deliveryDate:(new Date).toISOString(),deliveryNoteDate:(new Date).toISOString()},documentNumber:0,documentInvoiceNumber:0,documentComment:"",documentDate:"",displayPrices:!0}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;return c(regeneratorRuntime.mark((function n(){var t,o,r,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===(t=e.order.documents.find((function(e){return"Rechnung"==e.config.name})))){n.next=6;break}e.documentNumberInvoicePreview=t.config.documentNumber,e.documentConfig.documentInvoiceNumber=e.documentNumberInvoicePreview,n.next=11;break;case 6:return n.next=8,e.numberRangeService.reserve("document_invoice",e.order.salesChannelId,!1);case 8:o=n.sent,e.documentNumberInvoicePreview=o.number,e.documentConfig.documentInvoiceNumber=e.documentNumberInvoicePreview;case 11:if(void 0===(r=e.order.documents.find((function(e){return"Lieferschein"==e.config.name})))){n.next=18;break}e.documentNumberPreview=r.config.documentNumber,e.documentConfig.documentNumber=r.config.documentNumber,e.documentConfig.documentDate=(new Date).toISOString(),n.next=24;break;case 18:return n.next=20,e.numberRangeService.reserve("document_delivery_note",e.order.salesChannelId,!0);case 20:u=n.sent,e.documentConfig.documentNumber=u.number,e.documentNumberPreview=e.documentConfig.documentNumber,e.documentConfig.documentDate=(new Date).toISOString();case 24:case"end":return n.stop()}}),n)})))()},onCreateDocument:function(){var e=arguments,n=this;return c(regeneratorRuntime.mark((function t(){var o,r,u,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.length>0&&void 0!==e[0]&&e[0],n.documentNumberInvoicePreview!==n.documentConfig.documentInvoiceNumber){t.next=13;break}if(void 0===(r=n.order.documents.find((function(e){return"Rechnung"==e.config.name})))){t.next=7;break}n.documentConfig.custom.documentInvoiceNumber=r.config.documentNumber,t.next=11;break;case 7:return t.next=9,n.numberRangeService.reserve("document_invoice",n.order.salesChannelId,!1);case 9:u=t.sent,n.documentConfig.custom.documentInvoiceNumber=u.number;case 11:t.next=14;break;case 13:n.documentConfig.custom.documentInvoiceNumber=n.documentConfig.documentInvoiceNumber;case 14:if(n.documentNumberPreview!==n.documentConfig.documentNumber){t.next=26;break}if(void 0===(c=n.order.documents.find((function(e){return"Lieferschein"==e.config.name})))){t.next=20;break}n.documentConfig.custom.deliveryNoteNumber=c.config.documentNumber,t.next=24;break;case 20:return t.next=22,n.numberRangeService.reserve("document_delivery_note",n.order.salesChannelId,!1);case 22:i=t.sent,n.documentConfig.custom.deliveryNoteNumber=i.number;case 24:t.next=27;break;case 26:n.documentConfig.custom.deliveryNoteNumber=n.documentConfig.documentNumber;case 27:n.callDocumentCreate(o);case 28:case"end":return t.stop()}}),t)})))()},onPreview:function(){this.documentConfig.custom.deliveryNoteNumber=this.documentConfig.documentNumber,this.documentConfig.custom.documentInvoiceNumber=this.documentConfig.documentInvoiceNumber,this.$super("onPreview")}}});var i=t("G0NF"),d=t.n(i);Shopware.Component.override("sw-time-ago",{template:d.a,props:{date:{type:[Date,String],required:!0}},data:function(){return{formattedRelativeTime:null,interval:null}},computed:{dateObject:function(){return"string"==typeof this.date?new Date(this.date):this.date},dateFilter:function(){return Shopware.Filter.getByName("date")},fullDatetime:function(){return this.dateFilter(this.dateObject)},lessThanOneMinute:function(){var e=Date.now()-6e4;return this.dateObject.getTime()>e},lessThanOneHour:function(){var e=Date.now()-36e5;return this.dateObject.getTime()>e},isToday:function(){var e=new Date(Date.now());return this.dateObject.getDate()===e.getDate()&&this.dateObject.getMonth()===e.getMonth()&&this.dateObject.getFullYear()===e.getFullYear()}},mounted:function(){this.formattedRelativeTime=this.formatRelativeTime()},beforeDestroy:function(){this.interval&&clearInterval(this.interval)},methods:{formatRelativeTime:function(){var e=this.dateObject.getDate(),n=this.dateObject.getMonth()+1,t=this.dateObject.getFullYear(),o=this.dateObject.getHours(),r=this.dateObject.getMinutes();return(e>9?e:"0"+e)+"."+(n>9?n:"0"+n)+"."+t+", "+(o>9?o:"0"+o)+":"+(r>9?r:"0"+r)}}})}});